{"ast":null,"code":"import _regeneratorRuntime from \"/home/guillaume/rendu/drum-kit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/guillaume/rendu/drum-kit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/guillaume/rendu/drum-kit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/guillaume/rendu/drum-kit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { createBrowserHistory } from 'history';\nvar history = createBrowserHistory();\n\nvar axios = require('axios');\n\nvar API_ENDPOINT = \"http://35.198.134.25:5000/api\";\nvar config = {\n  crossdomain: true\n};\n\nvar UserService =\n/*#__PURE__*/\nfunction () {\n  function UserService() {\n    _classCallCheck(this, UserService);\n  }\n\n  _createClass(UserService, null, [{\n    key: \"login\",\n    // \n    // User management \n    // \n    value: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(email, password) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", axios.post(API_ENDPOINT + '/user/login', {\n                  \"email\": email,\n                  \"password\": password\n                }, config).then(function (response) {\n                  console.log(response);\n\n                  if (response.data.status === true) {\n                    if (response.data.message === 'Please, valide your email.') {\n                      return response.data;\n                    }\n\n                    localStorage.setItem('token', response.data.users.token);\n                    localStorage.setItem('email', email);\n                    localStorage.setItem('role', response.data.users.Role);\n                    history.push('/');\n                    window.location.reload();\n                  }\n\n                  return response.data;\n                }).catch(function (error) {\n                  console.error(error);\n                  return error;\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }]);\n\n  return UserService;\n}();\n\nexport { UserService as default };","map":{"version":3,"sources":["/home/guillaume/rendu/drum-kit/react/src/services/user-service.jsx"],"names":["createBrowserHistory","history","axios","require","API_ENDPOINT","config","crossdomain","UserService","email","password","post","then","response","console","log","data","status","message","localStorage","setItem","users","token","Role","push","window","location","reload","catch","error"],"mappings":";;;;AAAA,SAASA,oBAAT,QAAqC,SAArC;AACA,IAAMC,OAAO,GAAGD,oBAAoB,EAApC;;AACA,IAAME,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,IAAMC,YAAY,GAAG,+BAArB;AAEA,IAAMC,MAAM,GAAG;AACbC,EAAAA,WAAW,EAAE;AADA,CAAf;;IAIqBC,W;;;;;;;;;AACnB;AACA;AACA;;;;gDACmBC,K,EAAOC,Q;;;;;iDACjBP,KAAK,CAACQ,IAAN,CAAWN,YAAY,GAAG,aAA1B,EAAyC;AAAE,2BAASI,KAAX;AAAkB,8BAAYC;AAA9B,iBAAzC,EAAmFJ,MAAnF,EACJM,IADI,CACC,UAACC,QAAD,EAAc;AAClBC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,sBAAIA,QAAQ,CAACG,IAAT,CAAcC,MAAd,KAAyB,IAA7B,EAAmC;AACjC,wBAAIJ,QAAQ,CAACG,IAAT,CAAcE,OAAd,KAA0B,4BAA9B,EAA4D;AAC1D,6BAAQL,QAAQ,CAACG,IAAjB;AACD;;AACDG,oBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,QAAQ,CAACG,IAAT,CAAcK,KAAd,CAAoBC,KAAlD;AACAH,oBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BX,KAA9B;AACAU,oBAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BP,QAAQ,CAACG,IAAT,CAAcK,KAAd,CAAoBE,IAAjD;AACArB,oBAAAA,OAAO,CAACsB,IAAR,CAAa,GAAb;AACAC,oBAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;;AACD,yBAAOd,QAAQ,CAACG,IAAhB;AACD,iBAdI,EAcFY,KAdE,CAcI,UAACC,KAAD,EAAW;AAClBf,kBAAAA,OAAO,CAACe,KAAR,CAAcA,KAAd;AACA,yBAAOA,KAAP;AACD,iBAjBI,C;;;;;;;;;;;;;;;;;;;;;SALUrB,W","sourcesContent":["import { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\nconst axios = require('axios');\n\nconst API_ENDPOINT = \"http://35.198.134.25:5000/api\"\n\nconst config = {\n  crossdomain: true\n};\n\nexport default class UserService {\n  // \n  // User management \n  // \n  static async login(email, password) {\n    return axios.post(API_ENDPOINT + '/user/login', { \"email\": email, \"password\": password }, config)\n      .then((response) => {\n        console.log(response);\n        if (response.data.status === true) {\n          if (response.data.message === 'Please, valide your email.') {\n            return (response.data)\n          }\n          localStorage.setItem('token', response.data.users.token);\n          localStorage.setItem('email', email);\n          localStorage.setItem('role', response.data.users.Role);\n          history.push('/')\n          window.location.reload()\n        }\n        return response.data\n      }).catch((error) => {\n        console.error(error)\n        return error\n      })\n  }\n\n}"]},"metadata":{},"sourceType":"module"}